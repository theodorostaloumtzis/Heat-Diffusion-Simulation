###Heat-Diffusion-Simulation (Προσομοίωση διάχυσης θερμότητας)

Αυτό το αποθετήριο υλοποιεί μια παράλληλη προσομοίωση διάχυσης θερμότητας χρησιμοποιώντας μια υβριδική προσέγγιση MPI και OpenMP. Ο κώδικας αξιοποιεί το Message Passing Interface (MPI) για επικοινωνία και διαχείριση μνήμης μεταξύ διεργασιών και το OpenMP για παράλληλη επεξεργασία σε επεξεργαστές πολλαπλών πυρήνων.

## Έναρξη

1. **Προαπαιτήσεις:**
    - Ένας μεταγλωττιστής C (π.χ., GCC)
    - Βιβλιοθήκη MPI (π.χ., Open MPI) ή μεταγλωττιστής MPI (mpicc)
    - Βιβλιοθήκη OpenMP (συνήθως συμπεριλαμβάνεται στους περισσότερους σύγχρονους μεταγλωττιστές)

2. **Κλωνοποίηση του αποθετηρίου:**

    ```bash
    git clone https://github.com/theodorostaloumtzis/Heat-Diffusion-Simulation.git
    ```

## Μεταγλώττιση και Εκτέλεση της Προσομοίωσης Διάχυσης Θερμότητας

1. **Μετακίνηση στον κατάλογο του έργου:**

    ```bash
    cd Heat-Diffusion-Simulation
    ```

2. **Μεταγλώττιση του κώδικα:**

    Εντολή για τον σειριακό και τον κώδικα OpenMP:
    ```bash
    gcc -o heat_diffusion heat_diffusion.c -lm -fopenmp -Wall
    ```
    Εντολή για τον κώδικα MPI και τον υβριδικό κώδικα:
    ```bash
    mpicc -o heat_diffusion heat_diffusion.c -lm -fopenmp -Wall
    ```

    - **Επεξήγηση σημαιών:**
        - `-o heat_diffusion`: Ορίζει το όνομα του εκτελέσιμου αρχείου εξόδου σε "heat_diffusion".
        - `heat_diffusion.c`: Καθορίζει το αρχείο του πηγαίου κώδικα.
        - `-lm`: Συνδέει τη βασική βιβλιοθήκη μαθηματικών (απαιτείται για μαθηματικές συναρτήσεις).
        - `-fopenmp`: Ενεργοποιεί την υποστήριξη OpenMP για παράλληλη εκτέλεση.
        - `-Wall`: Ενεργοποιεί τις προειδοποιήσεις του μεταγλωττιστή (προαιρετικό, αλλά συνιστάται για την ποιότητα του κώδικα).

3. **Εκτέλεση της προσομοίωσης:**

    ```bash
    mpirun -np <αριθμός_διεργασιών> ./heat_diffusion
    ```

    - **Επεξήγηση:**
        - `mpirun`: Η εντολή εκκίνησης MPI.
        - `-np <αριθμός_διεργασιών>`: Καθορίζει τον επιθυμητό αριθμό διεργασιών MPI που θα χρησιμοποιηθούν για παράλληλη εκτέλεση. Αντικαταστήστε το `<αριθμός_διεργασιών>` με τον επιθυμητό αριθμό.
        - `./heat_diffusion`: Το μεταγλωττισμένο εκτελέσιμο αρχείο.

## Πρόσθετες Σημειώσεις

* Βεβαιωθείτε ότι έχετε εγκαταστήσει και διαμορφώσει τις βιβλιοθήκες MPI στο σύστημά σας για να λειτουργήσει σωστά το `mpirun`.
* Προσαρμόστε τις σημαίες μεταγλώττισης (`-lm`, `-fopenmp`, `-Wall`) εάν είναι απαραίτητο, ανάλογα με το σύστημα και τον μεταγλωττιστή σας.
* Αυτή η προσέγγιση προϋποθέτει ότι όλα τα απαραίτητα αρχεία κεφαλίδας (π.χ., `mpi.h`, `omp.h`) περιλαμβάνονται στο αρχείο `heat_diffusion.c` ή βρίσκονται σε τυπικούς καταλόγους συστήματος.

Ακολουθώντας αυτά τα βήματα, μπορείτε να μεταγλωττίσετε και να εκτελέσετε τον κώδικα προσομοίωσης διάχυσης θερμότητας χωρίς αρχείο Makefile. Θυμηθείτε να αντικαταστήσετε το `<αριθμός_διεργασιών>` με τον επιθυμητό αριθμό διεργασιών MPI για να αξιοποιήσετε τις δυνατότητες παράλληλης επεξεργασίας.

## Κατανόηση του Κώδικα

Η βασική λειτουργικότητα βρίσκεται στο αρχείο `heat_diffusion.c`. Ακολουθεί μια ανάλυση των βασικών βημάτων:

* **Αρχικοποίηση:**
    - Αρχικοποιείται το περιβάλλον MPI.
    - Ορίζονται οι διαστάσεις του πλέγματος (μέγεθος) και τα χρονικά βήματα για την προσομοίωση.
    - Διατίθεται μνήμη για το πλέγμα θερμοκρασίας.
    - Το πλέγμα αρχικοποιείται με κατάλληλες τιμές θερμοκρασίας (προαιρετικό).

* **Παράλληλοποίηση:**
    - Το πλέγμα χωρίζεται σε τμήματα και σε κάθε διαδικασία MPI ανατίθεται ένα τμήμα.
    - Τα νήματα OpenMP χρησιμοποιούνται για τον παράλληλο υπολογισμό μέσα σε κάθε τμήμα μιας διαδικασίας.

* **Προσομοίωση Διάχυσης Θερμότητας:**
    - Ο κύκλος του κύριου προγράμματος επαναλαμβάνεται για τα χρονικά βήματα.
    - Μέσα σε κάθε χρονικό βήμα:
        - Η συνάρτηση `update` (δεν εμφανίζεται 詳しく (kuwashiku) - λεπτομερώς) υπολογίζει νέες τιμές θερμοκρασίας για κάθε σημείο του πλέγματος με βάση τους γείτονές του και την εξίσωση διάχυσης θερμότητας.
        - Οι διαδικασίες MPI ανταλλάσσουν δεδομένα ορίων με τους γείτονές τους για να διασφαλίσουν ακριβείς υπολογισμούς στις άκρες κάθε τμήματος μιας διαδικασίας.
        - Χρησιμοποιείται η `MPI_Gather` για τη συλλογή δεδομένων θερμοκρασίας από όλες τις διαδικασίες στη διαδικασία root (συνήθως διαδικασία 0).
        - Η διαδικασία root μεταδίδει το πλήρες, ενημερωμένο πλέγμα θερμοκρασίας σε όλες τις διαδικασίες.

* **Ολοκλήρωση:**
    - Ολοκληρώνεται το περιβάλλον MPI.
    - Απελευθερώνεται η μνήμη που έχει διατεθεί για το πλέγμα.

## Συγγραφέας

Theodoros Taloumtzis ([https://github.com/theodorostaloumtzis](https://github.com/theodorostaloumtzis))
